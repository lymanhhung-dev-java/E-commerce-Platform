<div class="container-fluid p-4" *ngIf="!isLoading">

    <div *ngIf="status === 'PENDING'" class="row justify-content-center mt-5">
        <div class="col-md-8 col-lg-6">
            <div class="card border-0 shadow-lg rounded-4 text-center p-5">
                <div class="mb-4">
                    <div class="spinner-grow text-warning" style="width: 3rem; height: 3rem;" role="status"></div>
                </div>
                <h2 class="fw-bold text-dark mb-3">Hồ sơ đang chờ duyệt</h2>
                <p class="text-muted fs-5 mb-4">
                    Cảm ơn bạn đã đăng ký mở Shop <strong>"{{ shop?.shopName }}"</strong>.<br>
                    Đội ngũ quản trị đang xem xét hồ sơ của bạn. Quá trình này thường mất từ 1-24 giờ.
                </p>
                <div class="alert alert-warning border-0 rounded-3 d-inline-block px-4 py-2">
                    <i class="bi bi-info-circle-fill me-2"></i>
                    Bạn sẽ nhận được thông báo ngay khi hồ sơ được duyệt.
                </div>
                <div class="mt-5">
                    <button class="btn btn-outline-secondary rounded-pill px-4" routerLink="/">
                        <i class="bi bi-arrow-left me-2"></i> Quay về trang chủ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="status === 'REJECTED'" class="row justify-content-center mt-5">
        <div class="col-md-8 col-lg-6">
            <div class="card border-0 shadow-lg rounded-4 p-5">

                <div *ngIf="!isEditing" class="text-center">
                    <div class="mb-4 text-danger">
                        <i class="bi bi-x-circle-fill" style="font-size: 4rem;"></i>
                    </div>
                    <h2 class="fw-bold text-danger mb-3">Yêu cầu bị từ chối</h2>
                    <p class="text-muted fs-5 mb-4">
                        Hồ sơ đăng ký Shop <strong>"{{ shop?.shopName }}"</strong> chưa đạt yêu cầu.
                        <br>Lý do: <em>(Nếu Backend có trả về lý do thì hiện ở đây)</em>
                    </p>

                    <div class="d-grid gap-2 col-8 mx-auto">
                        <button class="btn btn-primary rounded-pill py-2 fw-bold" (click)="startEdit()">
                            <i class="bi bi-pencil-square me-2"></i> Sửa lại thông tin & Gửi lại
                        </button>
                        <button class="btn btn-outline-secondary rounded-pill py-2" routerLink="/contact-support">
                            Liên hệ hỗ trợ
                        </button>
                    </div>
                </div>

                <div *ngIf="isEditing">
                    <h4 class="fw-bold mb-4 text-center">Cập nhật hồ sơ đăng ký</h4>
                    <form [formGroup]="resubmitForm" (ngSubmit)="onResubmit()">
                        <div class="mb-3">
                            <label class="form-label fw-bold small">Tên Shop mới</label>
                            <input type="text" class="form-control" formControlName="shopName">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold small">Địa chỉ</label>
                            <input type="text" class="form-control" formControlName="address">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold small">Mô tả</label>
                            <textarea class="form-control" rows="3" formControlName="description"></textarea>
                        </div>

                        <div class="d-flex gap-2 mt-4">
                            <button type="button" class="btn btn-light flex-grow-1"
                                (click)="isEditing = false">Hủy</button>
                            <button type="submit" class="btn btn-primary flex-grow-1 fw-bold">Gửi lại yêu cầu</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <div *ngIf="status === 'ACTIVE'">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h3 class="fw-bold mb-1">Tổng quan Shop</h3>
                <p class="text-muted small">Chào mừng trở lại, {{ shop?.ownerName }}!</p>
            </div>
            <button class="btn btn-primary rounded-pill px-3">
                <i class="bi bi-plus-lg me-1"></i> Đăng sản phẩm mới
            </button>
        </div>

        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="card border-0 shadow-sm p-3 rounded-4 bg-primary text-white">
                    <div class="small opacity-75">Doanh thu hôm nay</div>
                    <div class="fs-3 fw-bold mt-2">0 đ</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-0 shadow-sm p-3 rounded-4">
                    <div class="small text-muted">Đơn hàng mới</div>
                    <div class="fs-3 fw-bold mt-2">0</div>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4" style="min-height: 400px;">
            <div class="card-body d-flex align-items-center justify-content-center text-muted">
                (Biểu đồ hoặc danh sách đơn hàng sẽ hiện ở đây)
            </div>
        </div>

    </div>

</div>

<div *ngIf="isLoading" class="d-flex justify-content-center align-items-center vh-100">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>