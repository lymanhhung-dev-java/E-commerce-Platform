<div class="container-fluid p-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h3 class="fw-bold mb-1">Duyệt cửa hàng mới</h3>
      <p class="text-muted small mb-0">Danh sách các tài khoản đăng ký trở thành người bán.</p>
    </div>
    <span class="badge bg-warning text-dark rounded-pill px-3 py-2">
      Chờ duyệt: {{ totalElements }}
    </span>
  </div>

  <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
    <div class="table-responsive">
      <table class="table align-middle mb-0 table-hover">
        <thead class="bg-light">
          <tr>
            <th class="ps-4 py-3">Thông tin Shop</th>
            <th class="py-3">Chủ sở hữu</th>
            <th class="py-3">Ngày đăng ký</th>
            <th class="text-end pe-4 py-3">Hành động</th>
          </tr>
        </thead>
        <tbody>
          
          <tr *ngFor="let shop of shopRequests">
            <td class="ps-4">
              <div class="d-flex align-items-center gap-3">
                <img [src]="shop.logoUrl || 'assets/images/default-shop.png'" 
                     class="rounded border object-fit-cover" width="50" height="50"
                     alt="Logo">
                <div>
                  <div class="fw-bold text-dark">{{ shop.shopName }}</div>
                  <div class="small text-muted text-truncate" style="max-width: 200px;">
                    <i class="bi bi-geo-alt-fill me-1"></i>{{ shop.address }}
                  </div>
                </div>
              </div>
            </td>

            <td>
              <div class="fw-bold">{{ shop.ownerName }}</div>
              <div class="small text-muted">{{ shop.ownerEmail }}</div>
            </td>

            <td>
              <span class="badge bg-light text-secondary border">
                {{ shop.createdAt | date:'dd/MM/yyyy HH:mm' }}
              </span>
            </td>

            <td class="text-end pe-4">
              <button class="btn btn-success btn-sm me-2 fw-bold" (click)="onApprove(shop, true)">
                <i class="bi bi-check-lg me-1"></i> Duyệt
              </button>
              
              <button class="btn btn-outline-danger btn-sm fw-bold" (click)="onApprove(shop, false)">
                <i class="bi bi-x-lg me-1"></i> Từ chối
              </button>
            </td>
          </tr>

          <tr *ngIf="shopRequests.length === 0">
            <td colspan="4" class="text-center py-5">
              <div class="text-muted">
                <i class="bi bi-inbox fs-1 d-block mb-2 opacity-50"></i>
                Hiện không có yêu cầu nào đang chờ duyệt.
              </div>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

    <div class="card-footer bg-white border-0 py-3" *ngIf="totalPages > 0">
      <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-light border btn-sm" 
                [disabled]="currentPage === 0" 
                (click)="onPageChange(currentPage - 1)">
          Trước
        </button>
        <span class="mx-2 small fw-bold pt-1">Trang {{ currentPage + 1 }} / {{ totalPages }}</span>
        <button class="btn btn-light border btn-sm" 
                [disabled]="currentPage >= totalPages - 1" 
                (click)="onPageChange(currentPage + 1)">
          Sau
        </button>
      </div>
    </div>
  </div>
</div>